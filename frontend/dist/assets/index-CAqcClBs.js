import{_ as $,u as j,r as n,Q as w,c as O,a,b as S,g as s,w as l,t as L,A as d,I as P,y as u,o as Q,a8 as D,h as R,a9 as G,U as H,aa as J,ab as E,E as i}from"./index-DukRknOf.js";import{r as W,l as X,a as Y}from"./auth-ypMu6_Z2.js";const Z={class:"auth-page"},ee={class:"auth-box"},se={class:"auth-sidebar"},ae={class:"sidebar-top"},le={class:"feature-list"},oe={class:"feature-item"},te={class:"feature-item"},re={class:"feature-item"},ie={class:"auth-form-container"},ne={class:"form-wrapper"},de={class:"auth-header"},ue={class:"auth-title"},me={class:"auth-subtitle"},pe={class:"form-actions"},ce={class:"form-footer"},ge={class:"footer-text"},fe={__name:"index",setup(ve){const K=j(),T=P(),f=n("login"),y=n(null),V=n(null),k=n(!1),x=n(!1),v=n(!1),m=w({email:"",password:""}),N=w({email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}]}),o=w({email:"",code:"",password:"",password2:""}),A=w({email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}],password:[{required:!0,message:"请设置密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}],password2:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(r,e,p)=>{e!==o.password?p(new Error("两次密码输入不一致")):p()},trigger:"blur"}]}),_=n("获取验证码"),b=n(!1),B=async()=>{if(!(b.value||v.value)){if(!o.email){i.warning("请先输入邮箱地址");return}try{v.value=!0,await W(o.email),i.success("验证码已发送到您的邮箱"),b.value=!0;let r=60;_.value=`${r}s后重新发送`;const e=setInterval(()=>{r--,r<=0?(clearInterval(e),b.value=!1,_.value="获取验证码"):_.value=`${r}s后重新发送`},1e3)}catch(r){i.error(r.message||"发送失败，请稍后重试")}finally{v.value=!1}}},C=()=>{y.value&&y.value.validate(async r=>{if(r){k.value=!0;try{const e=await X(m);e.code===200?(K.updateToken(e.data.token),i.success("登录成功"),T.push({name:"home"})):i.error(e.message||"登录失败")}catch(e){i.error(e.response.data.message||"登录失败，请稍后重试")}finally{k.value=!1}}else i.error("请正确填写表单")})},F=()=>{V.value&&V.value.validate(async r=>{if(r){x.value=!0;try{const e=await Y(o);e.code===200?(i.success("注册成功，请登录"),f.value="login",m.email=o.email,Object.assign(o,{email:"",code:"",password:"",password2:""})):i.error(e.message||"注册失败")}catch(e){i.error(e.message||"注册失败，请稍后重试")}finally{x.value=!1}}else i.error("请正确填写表单")})},M=()=>{T.push({name:"forget"})};return(r,e)=>{const p=u("el-icon"),c=u("el-input"),g=u("el-form-item"),h=u("el-link"),U=u("el-button"),q=u("el-form"),I=u("el-tab-pane"),z=u("el-tabs");return Q(),O("div",Z,[e[20]||(e[20]=a("div",{class:"bg-shape shape-1"},null,-1)),e[21]||(e[21]=a("div",{class:"bg-shape shape-2"},null,-1)),a("div",ee,[a("div",se,[a("div",ae,[e[10]||(e[10]=S('<div class="brand-header" data-v-135e9c39><img src="'+D+'" alt="Logo" class="brand-logo" data-v-135e9c39><span class="brand-name" data-v-135e9c39>DocTranslator</span></div><div class="brand-slogan" data-v-135e9c39><p class="main-slogan" data-v-135e9c39>AI文档智能翻译平台</p><p class="sub-slogan" data-v-135e9c39>一站式文档翻译平台</p></div>',2)),a("div",le,[a("div",oe,[s(p,null,{default:l(()=>[s(R(G))]),_:1}),e[7]||(e[7]=a("span",null,"开源项目，社区支持",-1))]),a("div",te,[s(p,null,{default:l(()=>[s(R(H))]),_:1}),e[8]||(e[8]=a("span",null,"支持本地/云端部署",-1))]),a("div",re,[s(p,null,{default:l(()=>[s(R(J))]),_:1}),e[9]||(e[9]=a("span",null,"支持定制化功能开发",-1))])])]),e[11]||(e[11]=a("div",{class:"sidebar-footer"},[a("div",{class:"copyright-info"},[a("a",{href:"https://www.doctranslator.cn",target:"_blank",class:"github-link"},[a("p",{class:"copyright"},"© 2025 DocTranslator 1.4.3 保留所有权利")])])],-1))]),a("div",ie,[e[19]||(e[19]=S('<div class="mobile-header" data-v-135e9c39><div class="mobile-brand" data-v-135e9c39><img src="'+D+'" alt="Logo" class="mobile-logo" data-v-135e9c39><div class="mobile-text" data-v-135e9c39><h1 class="mobile-title" data-v-135e9c39>DocTranslator Pro</h1><p class="mobile-subtitle" data-v-135e9c39>AI文档智能翻译平台</p></div></div></div>',1)),a("div",ne,[a("div",de,[a("h2",ue,L(f.value==="login"?"欢迎回来":"创建账号"),1),a("p",me,L(f.value==="login"?"登录您的账户":"注册新账户开始使用"),1)]),s(z,{modelValue:f.value,"onUpdate:modelValue":e[6]||(e[6]=t=>f.value=t),stretch:"",class:"custom-tabs"},{default:l(()=>[s(I,{label:"登录",name:"login"},{default:l(()=>[s(q,{ref_key:"loginFormRef",ref:y,model:m,rules:N,size:"large",class:"auth-form",onKeyup:E(C,["enter"])},{default:l(()=>[s(g,null,{default:l(()=>[s(c,{modelValue:m.email,"onUpdate:modelValue":e[0]||(e[0]=t=>m.email=t),placeholder:"请输入邮箱地址","prefix-icon":"Message"},null,8,["modelValue"])]),_:1}),s(g,null,{default:l(()=>[s(c,{modelValue:m.password,"onUpdate:modelValue":e[1]||(e[1]=t=>m.password=t),type:"password","show-password":"",placeholder:"请输入密码","prefix-icon":"Lock"},null,8,["modelValue"])]),_:1}),a("div",pe,[s(h,{underline:!1,class:"forget-link",onClick:M},{default:l(()=>e[12]||(e[12]=[d("忘记密码?")])),_:1})]),s(U,{type:"primary",class:"submit-btn",loading:k.value,onClick:C},{default:l(()=>e[13]||(e[13]=[d("登录")])),_:1},8,["loading"])]),_:1},8,["model","rules"])]),_:1}),s(I,{label:"注册",name:"register"},{default:l(()=>[s(q,{ref_key:"registerFormRef",ref:V,model:o,rules:A,size:"large",class:"auth-form",onKeyup:E(F,["enter"])},{default:l(()=>[s(g,{prop:"email"},{default:l(()=>[s(c,{modelValue:o.email,"onUpdate:modelValue":e[2]||(e[2]=t=>o.email=t),placeholder:"请输入邮箱地址","prefix-icon":"Message"},null,8,["modelValue"])]),_:1}),s(g,{prop:"code"},{default:l(()=>[s(c,{modelValue:o.code,"onUpdate:modelValue":e[3]||(e[3]=t=>o.code=t),placeholder:"请输入验证码","prefix-icon":"Key"},{suffix:l(()=>[s(U,{type:"primary",link:"",class:"code-btn",disabled:b.value,loading:v.value,onClick:B},{default:l(()=>[d(L(_.value),1)]),_:1},8,["disabled","loading"])]),_:1},8,["modelValue"])]),_:1}),s(g,{prop:"password"},{default:l(()=>[s(c,{modelValue:o.password,"onUpdate:modelValue":e[4]||(e[4]=t=>o.password=t),type:"password","show-password":"",placeholder:"请设置密码","prefix-icon":"Lock"},null,8,["modelValue"])]),_:1}),s(g,{prop:"password2"},{default:l(()=>[s(c,{modelValue:o.password2,"onUpdate:modelValue":e[5]||(e[5]=t=>o.password2=t),type:"password","show-password":"",placeholder:"请确认密码","prefix-icon":"Lock"},null,8,["modelValue"])]),_:1}),s(U,{type:"primary",class:"submit-btn",loading:x.value,onClick:F},{default:l(()=>e[14]||(e[14]=[d(" 注册 ")])),_:1},8,["loading"])]),_:1},8,["model","rules"])]),_:1})]),_:1},8,["modelValue"]),a("div",ce,[a("p",ge,[e[17]||(e[17]=d(" 继续使用即表示同意 ")),s(h,{type:"primary",class:"footer-link"},{default:l(()=>e[15]||(e[15]=[d("服务条款")])),_:1}),e[18]||(e[18]=d(" 和 ")),s(h,{type:"primary",class:"footer-link"},{default:l(()=>e[16]||(e[16]=[d("隐私政策")])),_:1})])])])])])])}}},we=$(fe,[["__scopeId","data-v-135e9c39"]]);export{we as default};
