import{_ as y,r as V,R as m,b as k,d as a,e as s,f as n,U as h,x as d,y as x,g as c,V as C,E as p,W as U}from"./index-CsiOcfCR.js";const $={class:"change-password-page"},q={class:"change-password-container"},B={class:"forgot-password-link"},E={__name:"reset",setup(N){const f=C(),i=V(),o=m({oldpwd:"",newpwd:"",newpwd_confirmation:""}),_=m({oldpwd:[{required:!0,message:"请填写原密码",trigger:"blur"}],newpwd:[{required:!0,message:"请填写新密码",trigger:"blur"}],newpwd_confirmation:[{required:!0,message:"请填写确认密码",trigger:"blur"}]}),w=async u=>{u.validate((e,t)=>{if(e){if(o.newpwd!==o.newpwd_confirmation){p.error("两次密码输入不一致");return}U(o).then(r=>{r.code===200?(p.success("密码修改成功"),f.push({name:"login"})):p.error(r.message)}).catch(r=>{p.error(r.message)})}else p.error(t[Object.keys(t)[0]][0].message)})};return(u,e)=>{const t=d("el-input"),r=d("el-form-item"),g=d("el-button"),b=d("el-link"),v=d("el-form");return x(),k("div",$,[a("div",q,[e[8]||(e[8]=a("div",{class:"change-password-header"},[a("h1",{class:"change-password-title"},"修改密码"),a("p",{class:"change-password-subtitle"},"请填写以下信息以修改您的密码")],-1)),s(v,{ref_key:"form",ref:i,model:o,"show-message":!1,rules:_,onKeyup:e[5]||(e[5]=h(l=>w(i.value),["enter"]))},{default:n(()=>[s(r,{label:"",prop:"oldpwd"},{default:n(()=>[s(t,{modelValue:o.oldpwd,"onUpdate:modelValue":e[0]||(e[0]=l=>o.oldpwd=l),type:"password","show-password":"",placeholder:"原密码","prefix-icon":"el-icon-lock"},null,8,["modelValue"])]),_:1}),s(r,{label:"",prop:"newpwd"},{default:n(()=>[s(t,{modelValue:o.newpwd,"onUpdate:modelValue":e[1]||(e[1]=l=>o.newpwd=l),type:"password","show-password":"",placeholder:"设置新密码","prefix-icon":"el-icon-lock"},null,8,["modelValue"])]),_:1}),s(r,{label:"",prop:"newpwd_confirmation"},{default:n(()=>[s(t,{modelValue:o.newpwd_confirmation,"onUpdate:modelValue":e[2]||(e[2]=l=>o.newpwd_confirmation=l),type:"password","show-password":"",placeholder:"确认新密码","prefix-icon":"el-icon-lock"},null,8,["modelValue"])]),_:1}),s(r,{label:"",class:"center"},{default:n(()=>[s(g,{type:"primary",size:"large",class:"change-password-btn",onClick:e[3]||(e[3]=l=>w(i.value))},{default:n(()=>e[6]||(e[6]=[c(" 提交 ")])),_:1})]),_:1}),a("div",B,[s(b,{type:"primary",onClick:e[4]||(e[4]=l=>u.$router.push("/forget"))},{default:n(()=>e[7]||(e[7]=[c("忘记密码？")])),_:1})])]),_:1},8,["model","rules"])])])}}},P=y(E,[["__scopeId","data-v-61b01fb2"]]);export{P as default};
